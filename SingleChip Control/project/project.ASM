	    ORG 0000H
		LJMP MAINSET
		
		ORG 0003H
		
		CALL OFF_F
		MOV DPTR,#LOOK
		
		RETI
		
		
		ORG 0013H
			
		CALL DELAY
		
		MOV R1,#100
STOP:   MOV DPTR,#SHOW1
		MOV R0,#0
        ACALL S_3
		DJNZ R1,STOP
			
		
		MOV R1,#0FFH
LOOP:   MOV DPTR,#LOOK
        MOV R0,#50H
        ACALL D_3
		DJNZ R1,LOOP

		MOV R1,#50
ALLBLACK:
        MOV DPTR,#TABLE_BLACK
		MOV R0,#0
		ACALL S_3
		DJNZ R1,ALLBLACK
		
		
		MOV DPTR,#LOOK


		CLR IE1
		RETI
		

	    
MAINSET:
		
MAIN: 
        SETB TCON.0
		SETB TCON.2
		MOV IE,#10000101B
		
		MOV A,P0 
	    
NEXT:	
	    MOV B,#10
	    DIV AB 
	    MOV R0,B 
	    MOV B,#10
	    DIV AB 
	    MOV R6,B
	    MOV R7,A
	
SAVE:	MOV 53H,R0
		MOV 52H,R6
		MOV 51H,R7
		

		MOV R7,#100
DIGIT4: MOV DPTR,#LOOK
        MOV R0,#50H
        ACALL D_3
		DJNZ R7,DIGIT4

		;CALL DELAY
		
		JMP MAIN
	
OFF_F:
		MOV R1,#1	
OFF:
        MOV DPTR,#TABLE_OFF
		MOV R0,#0
		ACALL S_3
		DJNZ R1,OFF
		
		JNB P3.2,OFF_F

		MOV R1,#10
ALLOFF:
        MOV DPTR,#TABLE_BLACK
		MOV R0,#0
		ACALL S_3
		DJNZ R1,ALLOFF
		
		RET
		
D_3: 	MOV A,@R0
		MOV P2,#00000111B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY
		
D_2: 	INC R0
		MOV A,@R0
		MOV P2,#00001011B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY
		
D_1: 	INC R0
		MOV A,@R0
		MOV P2,#00001101B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY

D_0: 	INC R0
		MOV A,@R0
		MOV P2,#00001110B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY
		
		RET
		
		
S_3: 	MOV A,R0
		MOV P2,#00000111B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY
		
S_2: 	INC R0
		MOV A,R0
		MOV P2,#00001011B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY
		
S_1: 	INC R0
		MOV A,R0
		MOV P2,#00001101B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY

S_0: 	INC R0
		MOV A,R0
		MOV P2,#00001110B
		MOVC A,@A+DPTR
		MOV P1,A
		CALL DELAY
		
		RET
		
DELAY:  MOV R4,#4
DE2:    MOV R3,#250
DE1:    DJNZ R3,DE1
		DJNZ R4,DE2
		RET
		
LOOK:   DB 0C0H,0F9H,0A4H,0B0H,99H,92H,82H,0F8H,80H,90H
TABLE_BLACK:
        DB 11111111B,11111111B,11111111B,11111111B
SHOW1:
		DB 10010010B,10000111B,11000000B,10001100B
TABLE_OFF:
        DB 11111111B,11000000B,10001110B,10001110B
ED:
		END